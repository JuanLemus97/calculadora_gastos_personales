{% extends "base.html" %}
{% block contenido %}
<h2>Gastos Registrados</h2>
<form method="get">
    <input type="text" name="categoria" placeholder="Categoría" value="{{ categoria or '' }}">
    <input type="text" name="descripcion" placeholder="Descripción" value="{{ descripcion or '' }}">
    <input type="date" name="fecha_inicio" value="{{ fecha_inicio or '' }}">
    <input type="date" name="fecha_fin" value="{{ fecha_fin or '' }}">
    <button type="submit">Buscar</button>
</form>
<form action="{{ url_for('gastos') }}">
    <input type="submit" value="Limpiar">
</form>
<table>
    <tr>
        <th>Fecha</th>
        <th>Categoría</th>
        <th>Monto</th>
        <th>Descripción</th>
        <th></th>
    </tr>
    {% for gasto in gastos %}
    <tr>
        <td>{{ gasto.fecha }}</td>
        <td>{{ gasto.categoria }}</td>
        <td>${{ gasto.monto }}</td>
        <td>{{ gasto.descripcion }}</td>
        <td><a href="{{ url_for('eliminar', gasto_id=gasto.id) }}"
            onclick="return confirm('¿Seguro que deseas eliminar este gasto?');">
            🗑️ Eliminar
        </a></td>
    </tr>
    {% endfor %}
</table>
<form action="{{ url_for('descargar') }}">
    <button type="submit">📥 Exportar gastos a CSV</button>
</form> 
{% endblock %}